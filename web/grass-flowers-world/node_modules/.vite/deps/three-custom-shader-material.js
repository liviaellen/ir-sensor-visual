import {
  j
} from "./chunk-EL2RN6TU.js";
import "./chunk-PZ6HF7LT.js";
import {
  require_jsx_runtime
} from "./chunk-VTS4FBCU.js";
import {
  require_react
} from "./chunk-6KCF6AHO.js";
import {
  __toESM
} from "./chunk-DC5AMYBS.js";

// node_modules/three-custom-shader-material/three-custom-shader-material.es.js
var import_jsx_runtime = __toESM(require_jsx_runtime());
var r = __toESM(require_react());
function l(u, e) {
  const t = r.useRef(false);
  r.useEffect(() => {
    if (t.current)
      return u();
    t.current = true;
  }, e);
}
function p({
  baseMaterial: u,
  vertexShader: e,
  fragmentShader: t,
  uniforms: i,
  cacheKey: f,
  patchMap: s,
  attach: d,
  ...n
}, m) {
  const o = r.useMemo(() => new j({
    baseMaterial: u,
    vertexShader: e,
    fragmentShader: t,
    uniforms: i,
    cacheKey: f,
    patchMap: s,
    ...n
  }), [u]);
  return l(() => {
    o.dispose(), o.update({
      vertexShader: e,
      fragmentShader: t,
      uniforms: i,
      patchMap: s,
      cacheKey: f
    });
  }, [e, t, i, s, f]), r.useEffect(() => () => o.dispose(), [o]), (0, import_jsx_runtime.jsx)(
    "primitive",
    {
      ref: m,
      attach: d ?? "material",
      object: o,
      ...n
    }
  );
}
var j2 = r.forwardRef(p);
export {
  j2 as default
};
//# sourceMappingURL=three-custom-shader-material.js.map
